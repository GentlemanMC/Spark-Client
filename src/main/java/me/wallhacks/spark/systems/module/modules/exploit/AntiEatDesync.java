package me.wallhacks.spark.systems.module.modules.exploit;

import me.wallhacks.spark.event.player.PlayerProcessRightClickEvent;
import me.wallhacks.spark.systems.module.Module;
import me.wallhacks.spark.util.MC;
import net.minecraft.item.ItemFood;
import net.minecraft.network.play.client.CPacketPlayerTryUseItem;
import net.minecraft.world.GameType;
import net.minecraftforge.fml.common.eventhandler.SubscribeEvent;

@Module.Registration(name = "AntiEatDesync", description = "Stop eat desync")
public class AntiEatDesync extends Module {

    @SubscribeEvent
    public void onUseItem(PlayerProcessRightClickEvent event) {

        if(MC.mc.player == event.getPlayer())
        if (MC.mc.playerController.currentGameType != GameType.SPECTATOR) {
            if(MC.mc.player.getHeldItem(event.getHand()).getItem() instanceof ItemFood)
            MC.mc.player.connection.sendPacket(new CPacketPlayerTryUseItem(event.getHand()));

        }
    }
}
